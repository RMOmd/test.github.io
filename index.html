<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Shop</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 0;
        }
        #main, #catalog, .product-detail, #cart {
            padding: 20px;
            text-align: center;
        }
        h1 {
            color: #444;
        }
        .product-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        .product, .product-detail {
            width: 100%; /* Default width for smaller screens */
            max-width: 300px; /* Maximum width */
            flex: 1 1 45%; /* Flex properties for responsiveness */
            box-sizing: border-box;
            text-align: center;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 10px;
            overflow: hidden; /* Ensure content doesn't overflow */
        }
        .product img, .product-detail img {
            max-width: 100%;
            height: auto;
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
        }
        .product p, .product-detail p {
            color: #666;
            margin: 5px 0;
        }
        button {
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            width: 100px; /* Fixed width for consistency */
            transition: all 0.3s ease;
        }
        .more_button {
            background-color: #d3d3d3;
            color: #000;
        }
        .more_button:hover {
            background-color: #000;
            color: #d3d3d3;
        }
        .cart_button {
            background-color: #ff0000;
            color: #fff;
        }
        .cart_button:hover {
            background-color: #fff;
            color: #ff0000;
        }
        .centered-image {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .shop-description {
            text-align: left;
            margin-top: 20px;
        }
        .radio-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        .cart-button-global {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ff0000;
            color: #fff;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
        }
        .cart-button-global:hover {
            background-color: #fff;
            color: #ff0000;
        }
        #cart_items {
            list-style-type: none;
            padding: 0;
        }
        #cart_items li {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #cart_items li button {
            background-color: #ff0000;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        #cart_items li button:hover {
            background-color: #fff;
            color: #ff0000;
        }
        #cart {
            display: none;
        }
    </style>
</head>
<body>
    <div id="main">
        <h1>OnlineShop</h1>
        <img src="shop.png" alt="Shop Image" class="centered-image">
        <p>Description of the shop</p>
        <div class="shop-description">
            <p>There are over 20 million Poles living abroad, which means that as many as 36% of Poles do not live in their homeland. Poles have been leaving and are still leaving for various reasons, such as the political, financial, family and professional situation, and for many other reasons. Each Emigrant has his own personal history. Citizens of Poland are spread all over the world, many of whom live in the United States, Canada, Great Britain and Germany. Polonia is also numerous in many European countries and practically in every other corner of the world. However, all Poles are bound together in one country, it is a longing for their homeland.</p>
        </div>
        <button id="catalog_button">Catalog</button>
    </div>
    <div id="catalog" style="display: none;">
        <h1>Online catalog</h1>
        <div class="product-grid">
            <div class="product">
                <img src="bas.png" alt="Product 1">
                <p>- More than 50 Polish channels;</p>
                <p>- Video library;</p>
                <p>- Archive.</p>
                <button class="more_button" data-product="product1_detail">More</button>
                <button class="cart_button">Cart</button>
            </div>
            <div class="product">
                <img src="fam.png" alt="Product 2">
                <p>- More than 80 Polish channels;</p>
                <p>- Video library;</p>
                <p>- Multiroom;</p>
                <p>- Archive;</p>
                <p>- Adult Channel – 1;</p>
                <p>- VoD – 1.</p>
                <button class="more_button" data-product="product2_detail">More</button>
                <button class="cart_button">Cart</button>
            </div>
            <div class="product">
                <img src="prem.png" alt="Product 3">
                <p>- More than 120 Polish channels;</p>
                <p>- Video library;</p>
                <p>- Multiroom;</p>
                <p>- HD Channels;</p>
                <p>- Archive;</p>
                <p>- Adult Channels – 5;</p>
                <p>- VoD – 5.</p>
                <button class="more_button" data-product="product3_detail">More</button>
                <button class="cart_button">Cart</button>
            </div>
            <div class="product">
                <img src="box.png" alt="Product 4">
                <p>The stylish and functional TVBox Smart media player with ergonomic design offers convenience and ease of use.</p>
                <p>*The maximum distance for the decoder to work of Wi-Fi is 3 meters from the router, and devices should be on the same level. In other conditions, please connect the cable.</p>
                <button class="more_button" data-product="product4_detail">More</button>
                <button class="cart_button">Cart</button>
            </div>
        </div>
        <button id="back_button">Back</button>
    </div>
    <div id="product1_detail" class="product-detail" style="display: none;">
        <h1>Package „Basic" Full Description</h1>
        <img src="bas.png" alt="Product 1">
        <p>The package „Basic' gives you the ability to watch a package of PolBox.TV channels on a TV, computer, smartphone or tablet.</p>
        <p>The package „Basic' allows you to watch:</p>
        <p>-More than 50 Polish channels</p>
        <p>-Video library</p>
        <p>-Archives</p>
        <p>One month is 30 days in all packages and with different durations.</p>
        <div class="radio-group">
            <label><input type="radio" name="subscription1" value="1 month"> 1 month</label>
            <label><input type="radio" name="subscription1" value="3 months"> 3 months</label>
            <label><input type="radio" name="subscription1" value="6 months"> 6 months</label>
            <label><input type="radio" name="subscription1" value="12 months"> 12 months</label>
        </div>
        <button class="more_button back_to_catalog">Back</button>
        <button class="cart_button add_to_cart" data-product="Product 1" data-period="subscription1" disabled>Cart</button>
    </div>
    <div id="product2_detail" class="product-detail" style="display: none;">
        <h1>Package „Family" Full Description</h1>
        <img src="fam.png" alt="Product 2">
        <p>The package „Family' gives you the ability to watch a package of PolBox.TV channels on a TV, computer, smartphone or tablet.</p>
        <p>The package „Family' allows you to watch:</p>
        <p>- More than 80 Polish channels</p>
        <p>- Video library</p>
        <p>- Multiroom</p>
        <p>- Archive</p>
        <p>- Adult Channel – 1</p>
        <p>- VoD – 1</p>
        <p>One month is 30 days in all packages and with different durations.</p>
        <div class="radio-group">
            <label><input type="radio" name="subscription2" value="1 month"> 1 month</label>
            <label><input type="radio" name="subscription2" value="3 months"> 3 months</label>
            <label><input type="radio" name="subscription2" value="6 months"> 6 months</label>
            <label><input type="radio" name="subscription2" value="12 months"> 12 months</label>
        </div>
        <button class="more_button back_to_catalog">Back</button>
        <button class="cart_button add_to_cart" data-product="Product 2" data-period="subscription2" disabled>Cart</button>
    </div>
    <div id="product3_detail" class="product-detail" style="display: none;">
        <h1>Package „Premium" Full Description</h1>
        <img src="prem.png" alt="Product 3">
        <p>The „Premium' package gives you the ability to watch PolBox.TV channels on a TV, computer, smartphone or tablet.</p>
        <p>The „Premium' package allows you to watch:</p>
        <p>- More than 120 Polish channels</p>
        <p>- Video library</p>
        <p>- Multiroom</p>
        <p>- HD Channels</p>
        <p>- Archive</p>
        <p>- Adult Channels – 5</p>
        <p>- VoD – 5</p>
        <p>One month is 30 days in all packages and with different durations.</p>
        <div class="radio-group">
            <label><input type="radio" name="subscription3" value="1 month"> 1 month</label>
            <label><input type="radio" name="subscription3" value="3 months"> 3 months</label>
            <label><input type="radio" name="subscription3" value="6 months"> 6 months</label>
            <label><input type="radio" name="subscription3" value="12 months"> 12 months</label>
        </div>
        <button class="more_button back_to_catalog">Back</button>
        <button class="cart_button add_to_cart" data-product="Product 3" data-period="subscription3" disabled>Cart</button>
    </div>
    <div id="product4_detail" class="product-detail" style="display: none;">
        <h1>Product 4 Full Description</h1>
        <img src="box.png" alt="Product 4">
        <p>The stylish and functional TVBox Smart media player with ergonomic design offers convenience and ease of use.</p>
        <p>TVBox Smart is a miniature player designed for users looking for easy-to-use, versatile and efficient solutions.</p>
        <p>*The maximum distance for the decoder to work of Wi-Fi is 3 meters from the router, and devices should be on the same level. In other conditions, please connect the cable.</p>
        <button class="more_button back_to_catalog">Back</button>
        <button class="cart_button add_to_cart" data-product="Product 4" data-period="subscription4" disabled>Cart</button>
    </div>
    <div id="cart">
        <h1>Shopping Cart</h1>
        <ul id="cart_items"></ul>
        <button id="checkout_button" disabled>Checkout</button>
        <button id="clear_cart_button">Clear Cart</button>
        <button id="back_to_catalog_from_cart">Back to Catalog</button>
    </div>
    <button id="cart_button_global" class="cart-button-global" style="display: none;">Cart</button>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram.WebApp;
        let catalogButton = document.getElementById("catalog_button");
        let backButton = document.getElementById("back_button");
        let main = document.getElementById("main");
        let catalog = document.getElementById("catalog");
        let moreButtons = document.querySelectorAll(".more_button");
        let backToCatalogButtons = document.querySelectorAll(".back_to_catalog");
        let cartButtonGlobal = document.getElementById("cart_button_global");
        let cart = document.getElementById("cart");
        let cartItemsList = document.getElementById("cart_items");
        let checkoutButton = document.getElementById("checkout_button");
        let clearCartButton = document.getElementById("clear_cart_button");
        let backToCatalogFromCart = document.getElementById("back_to_catalog_from_cart");

        let cartItems = [];

        function updateCartButtonGlobal() {
            if (cartItems.length > 0) {
                cartButtonGlobal.style.display = 'block';
            } else {
                cartButtonGlobal.style.display = 'none';
            }
        }

        function updateCheckoutButton() {
            checkoutButton.disabled = cartItems.length === 0;
        }

        function renderCartItems() {
            cartItemsList.innerHTML = '';
            cartItems.forEach((item, index) => {
                let li = document.createElement('li');
                li.textContent = `${item.product} - ${item.period}`;
                let removeButton = document.createElement('button');
                removeButton.textContent = 'Remove';
                removeButton.addEventListener('click', () => {
                    cartItems.splice(index, 1);
                    renderCartItems();
                    updateCartButtonGlobal();
                    updateCheckoutButton();
                });
                li.appendChild(removeButton);
                cartItemsList.appendChild(li);
            });
        }

        catalogButton.addEventListener("click", () => {
            main.style.display = "none";
            catalog.style.display = "block";
        });

        backButton.addEventListener("click", () => {
            catalog.style.display = "none";
            main.style.display = "block";
        });

        cartButtonGlobal.addEventListener("click", () => {
            catalog.style.display = "none";
            main.style.display = "none";
            cart.style.display = "block";
            renderCartItems();
        });

        moreButtons.forEach(button => {
            button.addEventListener("click", () => {
                catalog.style.display = "none";
                document.getElementById(button.dataset.product).style.display = "block";
            });
        });

        backToCatalogButtons.forEach(button => {
            button.addEventListener("click", () => {
                document.querySelectorAll(".product-detail").forEach(detail => {
                    detail.style.display = "none";
                });
                catalog.style.display = "block";
            });
        });

        backToCatalogFromCart.addEventListener("click", () => {
            cart.style.display = "none";
            catalog.style.display = "block";
        });

        clearCartButton.addEventListener("click", () => {
            cartItems = [];
            renderCartItems();
            updateCartButtonGlobal();
            updateCheckoutButton();
        });

        document.querySelectorAll(".product-detail input[type='radio']").forEach(radio => {
            radio.addEventListener("change", (e) => {
                let productDetail = e.target.closest('.product-detail');
                let addToCartButton = productDetail.querySelector('.add_to_cart');
                addToCartButton.disabled = false;
            });
        });

        document.querySelectorAll(".add_to_cart").forEach(button => {
            button.addEventListener("click", () => {
                let product = button.dataset.product;
                let period = document.querySelector(`input[name='${button.dataset.period}']:checked`).value;
                cartItems.push({ product, period });
                updateCartButtonGlobal();
                updateCheckoutButton();
                alert(`${product} (${period}) has been added to the cart.`);
            });
        });

        checkoutButton.addEventListener("click", () => {
            alert("Proceeding to checkout...");
            // Add your checkout logic here
        });
    </script>
</body>
</html>
